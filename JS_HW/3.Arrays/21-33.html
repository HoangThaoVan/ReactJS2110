<!DOCTYPE html>
<html>

<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width">
    <title>replit</title>
    <link href="style.css" rel="stylesheet" type="text/css" />
</head>
<script>
    //bai 21: Cho một mảng là một tập các số, tính tổng tất cả các số của mảng này?

    function sumArray(ar) {
        let total = 0
        for (let i = 0; i < ar.length; i++) {
            total += ar[i]
        }
        return total
    }
    let ar = [1, 2, 3, 4, 5, 6, 7, 8, 9, 9, 8, 7, 6, 5, 4, 3, 2, 1]
    console.log(sumArray(ar))


    //bai22:Cho một mảng là một tập các số, tìm số lớn nhất, nhỏ nhất và số trung bình trong mảng này?


    //lay phan tu lon nhat vaf nho nhat
    function maxMinAvg(ar) {

        let maxNum = Math.max.apply(Math, ar)
        let minNum = Math.min.apply(Math, ar)
            //lay phan tu trung binh
        let avgNum = sumArray(ar) / ar.length

        console.log(maxNum + ", " + minNum + ", " + avgNum)
    }

    maxMinAvg(ar)

    //bai 23: Cho một mảng là một tập các số nguyên, tìm số có tần suất xuất hiện nhiều nhất?
    function mostNumber(ar) {
        let a = [],
            b = [],
            arr
        ar.sort() //sap xep so theo thu tu tu be den lon
        for (let i = 0; i < ar.length; i++) {
            if (ar[i] !== arr) {
                a.push(ar[i]) //them gias tri cua ar[i] vao array a
                b.push(1) //them gia tri 1 vao trong array b
            } else {
                b[b.length - 1]++
            }
            arr = ar[i]
        }
        let numFrequency = Math.max.apply(Math, b)
        return numFrequency
    }
    let a = [1, 2, 3, 4, 5, 6, 7, 8, 9, 9, 9, 8, 7, 6, 5, 4, 3, 2, 1]
    console.log(mostNumber(a))
        //bai 24:Cho một mảng là một tập các số nguyên dương, lọc ra một bảng b gồm tất cả các số là số nguyên tố? (Dùng filter)
    function prime(num) {
        let pri = true
        if (num < 2) {
            pri = false
        } else {
            for (let i = 2; i <= Math.sqrt(num); i++) {
                if (num % i == 0) {
                    pri = false
                    break
                }
            }
        }
        if (pri == true) {
            return true
        } else {
            return false
        }
    }

    function findPrime(ar) {
        return ar.filter(function primes(number) {
                return prime(number) == true
            }) //lay so nguyen to, loai so ko phai la so nguyen to
    }
    let a1 = [1, 2, 3, 2, 3, 4, 6, 7]
    console.log("b=[" + findPrime(a1) + "]")
        //bai 25:Cho một mảng là một tập các số nguyên dương, hãy tạo một mảng b là tập hợp bình phương của các số trong mảng a
    function squareNum(ar) {
        return ar.map(function square(number) {
            return number ** 3 //thu lap phuong
        })
    }
    console.log('b = [' + squareNum(a1) + ']')


    //bai 26: Cho một mảng là một tập các số nguyên dương không trùng giá trị, và một số k. Hãy tìm trong mảng phần có khoảng cách tử gần với k nhất. Vì có thể có nhiều đáp án in ra tất cả vào một mảng.
    function nearestNum(ar, k) {
        let gap = []
        gap = ar.map(
            function nearestNum(num) {
                return Math.abs(num - k) //tra ve gia tri tuyet doi cua 1 so
            }
        )
        return ar.filter(
            function(number) {
                if (Math.min.apply(Math, gap) == Math.abs(number - k)) {
                    return number
                }
            }
        )
    }
    let a2 = [1, 2, 3, 4, 6, 7]
    console.log(nearestNum(a2, 5))
        //bai 27:Cho một mảng là một tập hợp các học viên trong lớp REACTJS, mảng là một tập hợp object của học viên gồm 3 thông tin: id, firstName, lastName, và age. Hãy đưa tên và họ về chuẩn tên với ký tự đầu tiên của tên Viết Hoa và tìm tất cả học viên có tên tồn tại chữ cái “a” hoặc “A” và tên dài hơn hoặc bằng 3 ký tự.

    let students = [{
        id: "T3HXX1",
        firstName: "NgAN",
        lastName: "Duong Thuy"
    }, {
        id: "T3HXX2",
        firstName: "Ha",
        lastName: "Do Thi Thu"
    }, {
        id: "T3HXX5",
        firstName: "Minh",
        lastName: "Nguyen Nhat"
    }]

    function title(str) {
        let splitStr = str.toLowerCase().split(" ")
        for (let i = 0; i < splitStr.length; i++) {
            splitStr[i] = splitStr[i].charAt(0).toUpperCase() + splitStr[i].substring(1)
                //chuan hoa chuoi va viet hoa chu cai dau dong
        }
        return splitStr.join(" ") //dat dau cach giua tung chu
    }

    function studentNameUponRequest(ar) {
        return ar.filter(request) //loai nhung ten ko dat yeu cau nhu la ko chua chu "a"

        function request(requ) {
            requ.firstName = title(requ.firstName)
            requ.lastName = title(requ.lastName)
            for (let i = 0; i <= requ.firstName.length; i++) {
                if ((requ.firstName.charAt(i) === 'a' || requ.firstName.charAt(i) === 'A') && requ.firstName.length >= 3) {
                    return requ
                }
            }
        }
    }
    console.log(studentNameUponRequest(students))

    //bai 28:Cho một mảng là một tập hợp các học viên trong lớp REACTJS, mảng là một tập hợp object của học viên gồm 3 thông tin: id, firstName, lastName, và age. Hãy tìm tất cả học sinh cá biệt của lớp biết rằng học sinh cá biệt có họ là “Do”.
    function individualStudents(ar) {
        return ar.filter(requsest)

        function requsest(reque) {
            if (reque.lastName.includes("Do")) {
                return reque
            }
        }
    }
    console.log(individualStudents(students))

    //bai 29: Hãy sắp xếp danh sách học viên theo tên (firstName).
    function SortListByName(ar) {
        return ar.sort(
            function(a, b) {
                return (a.firstName > b.firstName) ? 1 : -1
            })
    }
    console.log(SortListByName(students))

    //bai30:Cho một mảng là một tập các số nguyên dương, tìm số lớn thứ nhì trong mảng, không có thì in ra -1?
    let a4 = [1, 2, 3, 4, 5, 6, 7, 8, 9, 9, 9, 8, 7, 6, 5, 4, 3, 2, 1],
        a5 = [1, 1, 1, 1, 1]

    function secondNum(ar) {
        let arr = []
        for (var i = 0; i < ar.length; i++) {
            if (!arr.includes(ar[i])) {
                arr.push(ar[i])
            }
        }
        arr.sort(
            function(a, b) {
                return a - b
            }
        )
        if (arr.length == 1) {
            console.log("-1")

        } else {
            console.log(arr[arr.length - 2])
        }
    }
    secondNum(a4)
    secondNum(a5)
</script>

<body>

    <script src="script.js"></script>
</body>

</html>